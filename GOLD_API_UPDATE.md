# üîÑ ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ API ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á‡∏à‡∏£‡∏¥‡∏á

## ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏ó‡∏≥

### 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á API Route ‡πÉ‡∏´‡∏°‡πà
**‡πÑ‡∏ü‡∏•‡πå**: `src/app/api/gold-price/route.ts`

- ‚úÖ ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å **https://www.goldtraders.or.th/** (‡∏™‡∏°‡∏≤‡∏Ñ‡∏°‡∏Ñ‡πâ‡∏≤‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÑ‡∏ó‡∏¢)
- ‚úÖ Parse HTML ‡πÅ‡∏•‡∏∞‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô JSON
- ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Cache 5 ‡∏ô‡∏≤‡∏ó‡∏µ (‡∏•‡∏î load)
- ‚úÖ Handle errors ‡∏û‡∏£‡πâ‡∏≠‡∏° fallback

### 2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Gold Price API
**‡πÑ‡∏ü‡∏•‡πå**: `src/lib/mockGoldPriceAPI.ts`

- ‚úÖ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å Mock data ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏à‡∏£‡∏¥‡∏á
- ‚úÖ Fetch ‡∏à‡∏≤‡∏Å `/api/gold-price`
- ‚úÖ ‡∏°‡∏µ Fallback data ‡∏Å‡∏£‡∏ì‡∏µ API ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß
- ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡πÄ‡∏ß‡∏•‡∏≤, ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó)

### 3. ‡∏õ‡∏£‡∏±‡∏ö UI
**‡πÑ‡∏ü‡∏•‡πå**: `src/components/Dashboard/GoldPriceCard.tsx`

- ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏™‡∏°‡∏≤‡∏Ñ‡∏°‡∏Ñ‡πâ‡∏≤‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÑ‡∏ó‡∏¢"
- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° indicator ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ live

---

## üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å API

```typescript
{
  date: "2024-12-19",           // ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (‡∏Ñ.‡∏®.)
  time: "09:44",                 // ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó
  updateNumber: 2,               // ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô
  goldBarBuy: 64200,             // ‡∏ó‡∏≠‡∏á‡πÅ‡∏ó‡πà‡∏á‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠
  goldBarSell: 64300,            // ‡∏ó‡∏≠‡∏á‡πÅ‡∏ó‡πà‡∏á‡∏Ç‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å
  goldJewelryBuy: 62914,         // ‡∏ó‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏û‡∏£‡∏£‡∏ì‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠ (‡∏ê‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏µ)
  goldJewelrySell: 65100,        // ‡∏ó‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏û‡∏£‡∏£‡∏ì‡∏Ç‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å
  source: "thai_gold_association"
}
```

---

## üéØ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

### 1. User ‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏Ñ‡∏≤"
```
User ‚Üí useGoldPrice.refreshPrice()
  ‚Üì
fetchCurrentGoldPrice()
  ‚Üì
fetch('/api/gold-price')
  ‚Üì
API Route: GET /api/gold-price
  ‚Üì
fetch('https://www.goldtraders.or.th/')
  ‚Üì
Parse HTML ‚Üí Extract ‡∏£‡∏≤‡∏Ñ‡∏≤
  ‚Üì
Return JSON
  ‚Üì
‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á Supabase
  ‚Üì
‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ô UI ‚úÖ
```

### 2. ‡∏Å‡∏≤‡∏£ Parse ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≤‡∏Å HTML

API ‡∏à‡∏∞‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å HTML patterns:
- ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà/‡πÄ‡∏ß‡∏•‡∏≤: `‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà **19/12/2568 ‡πÄ‡∏ß‡∏•‡∏≤ 09:44 ‡∏ô. (‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 2)**`
- ‡∏ó‡∏≠‡∏á‡πÅ‡∏ó‡πà‡∏á‡∏Ç‡∏≤‡∏¢: `‡∏Ç‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å **64,300.00**`
- ‡∏ó‡∏≠‡∏á‡πÅ‡∏ó‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠: `‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠ **64,200.00**`
- ‡∏ó‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏û‡∏£‡∏£‡∏ì‡∏Ç‡∏≤‡∏¢: `‡∏Ç‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å **65,100.00**`
- ‡∏ê‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏µ: `‡∏ê‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏µ **62,914.00**`

### 3. ‡πÅ‡∏õ‡∏•‡∏á ‡∏û.‡∏®. ‚Üí ‡∏Ñ.‡∏®.
```typescript
// ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡πá‡∏ö: 19/12/2568
// ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô: 2024-12-19
const yearCE = parseInt(yearBE) - 543
```

---

## üîß Configuration

### Cache Strategy
```typescript
// API Route cache 5 ‡∏ô‡∏≤‡∏ó‡∏µ
Cache-Control: 'public, s-maxage=300, stale-while-revalidate=600'
```

### Error Handling
- ‚úÖ ‡∏ñ‡πâ‡∏≤ API ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß ‚Üí ‡πÉ‡∏ä‡πâ Fallback data
- ‚úÖ ‡∏ñ‡πâ‡∏≤ Parse ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‚Üí Return error
- ‚úÖ Log error ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Console

---

## üß™ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### Test 1: ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥
1. ‡πÄ‡∏õ‡∏¥‡∏î `/gold-prices`
2. ‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏Ñ‡∏≤"
3. ‚úÖ ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏°‡∏≤‡∏Ñ‡∏°‡∏Ñ‡πâ‡∏≤‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥
4. ‚úÖ ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"

### Test 2: ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
1. ‡πÄ‡∏õ‡∏¥‡∏î Browser DevTools (F12)
2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Network tab
3. ‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏Ñ‡∏≤"
4. ‚úÖ ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô request ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `/api/gold-price`
5. ‚úÖ Response ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• `goldBarBuy`, `goldBarSell`, etc.

### Test 3: Error Handling
1. ‡∏õ‡∏¥‡∏î Internet
2. ‡∏Ñ‡∏•‡∏¥‡∏Å "‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏Ñ‡∏≤"
3. ‚úÖ ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô fallback data (64,200 / 64,300)
4. ‚úÖ ‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥

---

## üìù ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

### ‚ö†Ô∏è CORS
- ‡πÉ‡∏ä‡πâ API Route ‡∏Ç‡∏≠‡∏á Next.js ‡πÄ‡∏õ‡πá‡∏ô proxy
- ‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ CORS ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å goldtraders.or.th ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á

### üìå ‡∏ê‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏µ
‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏≠‡∏á‡∏£‡∏π‡∏õ‡∏û‡∏£‡∏£‡∏ì ‡πÉ‡∏ä‡πâ **‡∏ê‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏µ** ‡∏ã‡∏∂‡πà‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å‡πÄ‡∏Å‡∏ì‡∏ë‡πå:
```
‡∏ê‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏µ = ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏≠‡∏á‡πÅ‡∏ó‡πà‡∏á - 5% (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î)
```

### üïê Update Frequency
- ‡∏™‡∏°‡∏≤‡∏Ñ‡∏°‡∏Ñ‡πâ‡∏≤‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ß‡∏±‡∏ô‡∏•‡∏∞‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á
- API ‡∏°‡∏µ cache 5 ‡∏ô‡∏≤‡∏ó‡∏µ
- User ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏î‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î

### üåê Production Considerations
‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ deploy:
1. ‚úÖ API Route ‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ö‡∏ô Vercel/Netlify
2. ‚ö†Ô∏è ‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á handle rate limiting
3. üí° ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÉ‡∏ä‡πâ Cron job ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏Ñ‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å 15-30 ‡∏ô‡∏≤‡∏ó‡∏µ

---

## üéâ ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå

### ‚úÖ ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ
- ‡πÉ‡∏ä‡πâ Mock data (38,800 ‡∏ö‡∏≤‡∏ó)
- ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
- ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á

### ‚úÖ ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ
- ‡∏î‡∏∂‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å **‡∏™‡∏°‡∏≤‡∏Ñ‡∏°‡∏Ñ‡πâ‡∏≤‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÑ‡∏ó‡∏¢** üáπüá≠
- ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á (64,300 ‡∏ö‡∏≤‡∏ó)
- ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó
- ‡∏°‡∏µ Fallback ‡∏Å‡∏£‡∏ì‡∏µ error

---

## üöÄ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

```typescript
// ‡πÉ‡∏ô Component
const { currentPrice, refreshPrice } = useGoldPrice()

// ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°
await refreshPrice()

// ‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
console.log(currentPrice)
// {
//   gold_bar_buy: 64200,
//   gold_bar_sell: 64300,
//   gold_jewelry_buy: 62914,
//   gold_jewelry_sell: 65100,
//   price_date: "2024-12-19"
// }
```

---

## üìñ Reference

- **‡∏™‡∏°‡∏≤‡∏Ñ‡∏°‡∏Ñ‡πâ‡∏≤‡∏ó‡∏≠‡∏á‡∏Ñ‡∏≥‡πÑ‡∏ó‡∏¢**: https://www.goldtraders.or.th/
- **API Endpoint**: `/api/gold-price`
- **Hook**: `useGoldPrice` (`src/hooks/useGoldPrice.ts`)

---

**üéä ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏≠‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÅ‡∏´‡∏•‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏•‡πâ‡∏ß!**

*‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÇ‡∏î‡∏¢: Senior Full-stack Developer*
*‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: 19 ‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏° 2024*

